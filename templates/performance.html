{% extends 'base/base.html' %}

{% block title %}
    Performance
{% endblock %}

{% block active_charts %}
    active
{% endblock %}

{% block page-header %}
    Performance <small>Running</small>
{% endblock %}

{% block dir-header %}
    <li class="active">
        <i class="fa fa-bar-chart-o"></i> Performance
    </li>
{% endblock %}


{% block js_custom %}
    {% load staticfiles %}
    <script src="{% static "bower_components/flot/excanvas.min.js" %} " type="text/javascript"></script>
    <script src="{% static "bower_components/flot/jquery.flot.js" %} " type="text/javascript"></script>
    <script src="{% static "bower_components/flot/jquery.flot.pie.js" %} " type="text/javascript"></script>
    <script src="{% static "bower_components/flot/jquery.flot.resize.js" %} " type="text/javascript"></script>
    <script src="{% static "bower_components/flot/jquery.flot.time.js" %} " type="text/javascript"></script>
    <script src="{% static "bower_components/flot.tooltip/js/jquery.flot.tooltip.min.js" %} " type="text/javascript"></script>
    <!--<link href="{% static "bower_components/flot/examples/examples.css" %}" rel="stylesheet" type="text/css" >-->
    <script language="javascript" type="text/javascript" src="{% static "bower_components/flot/jquery.js"%}"></script>
	<script language="javascript" type="text/javascript" src="{% static "bower_components/flot/jquery.flot.js"%}"></script>

<script>
    var data = [];
    var dataset;
    var totalPoints = 100;
    var updateInterval = 1000;
    var now = new Date().getTime();


    function GetData() {
        data.shift();

        while (data.length < totalPoints) {
            var y = Math.random() * 100;
            var temp = [now += updateInterval, y];

            data.push(temp);
        }
    }

    var options = {
        series: {
            lines: {
                show: true,
                lineWidth: 1.2,
                fill: true
            }
        },
        xaxis: {
            mode: "time",
            tickSize: [2, "second"],
            tickFormatter: function(v, axis) {
                var date = new Date(v);

                if (date.getSeconds() % 20 == 0) {
                    var hours = date.getHours() < 10 ? "0" + date.getHours() : date.getHours();
                    var minutes = date.getMinutes() < 10 ? "0" + date.getMinutes() : date.getMinutes();
                    var seconds = date.getSeconds() < 10 ? "0" + date.getSeconds() : date.getSeconds();

                    return hours + ":" + minutes + ":" + seconds;
                } else {
                    return "";
                }
            },
            axisLabel: "Time",
            axisLabelUseCanvas: true,
            axisLabelFontSizePixels: 12,
            axisLabelFontFamily: 'Verdana, Arial',
            axisLabelPadding: 10
        },
        yaxis: {
            min: 0,
            max: 100,
            tickSize: 5,
            tickFormatter: function(v, axis) {
                if (v % 10 == 0) {
                    return v + "%";
                } else {
                    return "";
                }
            },
            axisLabel: "CPU loading",
            axisLabelUseCanvas: true,
            axisLabelFontSizePixels: 12,
            axisLabelFontFamily: 'Verdana, Arial',
            axisLabelPadding: 6
        },
        legend: {
            labelBoxBorderColor: "#fff"
        },
        grid: {
            backgroundColor: "#000000",
            tickColor: "#008040"
        }
    };

    $(document).ready(function() {
        GetData();

        dataset = [{
            label: "CPU",
            data: data,
            color: "#00FF00"
        }];

        $.plot($("#flot-placeholder1"), dataset, options);

        function update() {
            GetData();

            $.plot($("#flot-placeholder1"), dataset, options)
            setTimeout(update, updateInterval);
        }

        update();
    });
</script>
{% endblock %}


{% block content %}
<div id="flot-placeholder1" style="width:550px;height:300px;margin:0 auto"></div>
{% endblock %}